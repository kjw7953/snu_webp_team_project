<html>
  <head>
      <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
  <body>
    관악산 탈출하기에 온 걸 환영합니다.
    <br>당신은 학과 개강파티에 참여해서 정신을 잃었었습니다.
    <br>눈을 떠보니 관악산의 정상에 와있는 상태입니다.
    <br>집으로 안전하게 돌아가야 합니다!
    <br>당신의 이름을 입력해주세요.
    <div class=""></div>

    <form id="form" action="/signup">
        이름: <input name="name"/>
        <input type="submit" value="확인"/>
    </form>

    <script>

    const key = localStorage.getItem('_key');
    if (key) {
      location.href = '/status_set';
    }
     $('#form').submit(function(e) {
       e.preventDefault();
       const action = $(this).attr('action');
       $.post(action, $(this).serialize(),(res) => {
         if(res.key) {
          localStorage.setItem('_key', res.key);
          location.href = '/status_set';
         }
         else {
          alert("에러가 발생했습니다. 다시 시도해주세요.");
         }
       });
     });
    </script>
  </body>
</html>
